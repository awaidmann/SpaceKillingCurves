<!DOCTYPE html/>
<html>
<head>
  <title>Continuity - An Unbroken Thought</title>
</head>
<body>
  <div
    id="main"
    style="height:100%; width:100%; background-color:gray;">
    <canvas id="line-canvas" style="border:1px solid black"></canvas>
  </div>

  <script src="https://d3js.org/d3-selection.v1.min.js"></script>
  <script>
    var prev = undefined
    var timer = undefined

    var main = d3.select("div"),
        height = main.node().clientHeight,
        width = main.node().clientWidth
    main.on("mousedown", start)
    main.on("mouseup", stop)

    var canvas = main.select("canvas")
      .attr("height", height)
      .attr("width", width)
    var ctx = canvas.node().getContext("2d")
    ctx.lineWidth = 2
    ctx.strokeStyle = "white"

    function record(e) {
      var curr = [d3.event.offsetX, d3.event.offsetY]
      if (prev != undefined) {
        draw(prev, curr)
      }
      prev = curr
    }

    function draw(prevCoor, currCoor) {
      ctx.beginPath()
      ctx.moveTo(prevCoor[0], prevCoor[1])
      ctx.lineTo(currCoor[0], currCoor[1])
      ctx.stroke()
    }

    function start(e) {
      console.log("Mouse down at: " + Date.now())
      main.on("mousemove", record)
    }

    function stop() {
      console.log("Mouse up at: " + Date.now())
      main.on("mousemove", null)
    }
  </script>
</body>
</html>
